#!/usr/bin/env bash
# Скрипт рахує кількість файлів вказаного формату у директорії

print_usage() {
  echo "Синтаксис: $0 <директорія> <розширення>"
  echo "Приклад:  $0 /var/log log"
}

# Перевірка кількості аргументів
if [[ $# -ne 2 ]]; then
  echo "Помилка: некоректна кількість аргументів."
  print_usage
  exit 1
fi

base_dir="$1"
ext="${2#.}"   # прибираємо крапку, якщо користувач її вказав

# Перевіряємо, що директорія існує
if [[ ! -d "$base_dir" ]]; then
  echo "Помилка: каталог '$base_dir' не існує."
  exit 1
fi

# Підрахунок файлів потрібного типу
# Використовуємо -printf '.' і wc -c, щоб не ганяти зайвий текст по конвеєру
file_count=$(find "$base_dir" -type f -name "*.${ext}" -printf '.' 2>/dev/null | wc -c)

echo "У каталозі '$base_dir' знайдено ${file_count} файл(ів) з розширенням .${ext}."
